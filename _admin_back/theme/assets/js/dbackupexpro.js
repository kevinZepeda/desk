//#####################################################
// CARLOS SANTOS DE AZEVEDO
// Software: DbackupeX Pro
// Mysql Database Backups Central
// CopyRight: Litos Media - Carlos Santos de Azevedo
// Contact: info@litos.top
//#####################################################
$(document).ready(function(){function t(e){new Noty({type:"success",layout:"bottomRight",theme:"mint",text:e,timeout:3e3,progressBar:!0,closeWith:["click","button"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!0,queue:"global",container:!1,buttons:[],sounds:{sources:["../assets/sounds/1.ogg"],volume:1,conditions:["docVisible"]},titleCount:{conditions:[]},modal:!1}).show()}function i(e){new Noty({type:"error",layout:"bottomRight",theme:"mint",text:e,timeout:3e3,progressBar:!0,closeWith:["click","button"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!0,queue:"global",container:!1,buttons:[],sounds:{sources:["../assets/sounds/1.ogg"],volume:1,conditions:["docVisible"]},titleCount:{conditions:[]},modal:!1}).show()}$.fn.delayKeyup=function(e,t){var i=0,a=$(this);return $(this).keyup(function(){clearTimeout(i),i=setTimeout(function(){e(a)},t)}),$(this)},$("#s").delayKeyup(function(e){var t=$("#s").val(),i=$("#procura_form_token").val();$("#database_list_result").prepend('<div class="loader_card"></div>'),$("#database_list_result").load("dbackupexpro_ajax.php?procura_form_token="+i+"&s="+t),$(".loader").fadeOut(300),setTimeout(function(){$(".loader_card").remove()},800)},600),$("#s").delayKeyup(function(e){var t=$("#s").val(),i=$("#procura_ftp_form_token").val();$("#ftp_list_result").prepend('<div class="loader_card"></div>'),$("#ftp_list_result").load("dbackupexpro_ajax.php?procura_ftp_form_token="+i+"&s="+t),$(".loader").fadeOut(300),setTimeout(function(){$(".loader_card").remove()},800)},600),$(".ftp_subfolder").delayKeyup(function(e){var t=$(".ftp_subfolder").val();"/"!=t.substr(-1)&&$(".ftp_subfolder").val(t+"/")},1300),$(document).on("click","#database_list_result .paginacao a",function(e){e.preventDefault(),$("#backup_list_container").prepend('<div class="loader_card"></div>');var t=$(this).attr("href");$("#backup_list_container").css("overflow","hidden").fadeOut(200).load(t).fadeIn(200),$(".loader_card").fadeOut(600),setTimeout(function(){$(".loader_card").remove()},1e3)}),$(document).on("click","#backup_list_container .paginacao a ",function(e){e.preventDefault(),$("#backup_list_container").prepend('<div class="loader_card"></div>');var t=$(this).attr("href");$("#backup_list_container").css("overflow","hidden").fadeOut(200).load(t).fadeIn(200),$(".loader_card").fadeOut(600),setTimeout(function(){$(".loader_card").remove()},1e3)}),$("#add_new_database").submit(function(e){var a=$("#add_new_database"),r=$("#procura_form_token").val();$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),beforeSend:function(){$("#add_new_database").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$("#database_list_result").load("dbackupexpro_ajax.php?procura_form_token="+r)),$(".loader").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(document).on("submit",".update_database_form",function(e){var a=$(this),r=(a.attr("id"),$("#procura_form_token").val());$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:a.serialize(),beforeSend:function(){},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$(".modal-backdrop").remove(),$("#list_result_box").prepend('<div class="loader_card"></div>'),$("#database_list_result").load("dbackupexpro_ajax.php?procura_form_token="+r)),$(".loader").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(document).on("click",".delete-db",function(e){e.preventDefault();var a=$(this).attr("id"),r=$(this).attr("delete_dbform_token");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{delete_dbform_token:r,db_to_delete:a},beforeSend:function(){},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):($("#row_"+a).fadeOut(500),t(e)),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},700)}})}),$(".resete-tocken-button").click(function(){var t=$(this).attr("resete_cron_token_dbform_token"),a=$(this).attr("db_id");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{resete_cron_token_dbform_token:t,id:a},beforeSend:function(){$("#cron_link_container").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):($("#cron_link_container code").text(e),$("#cron_link_container .copy-clip").attr("data-clipboard-text",e)),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},700)}}),e.preventDefault()}),$(".copy-clip").click(function(){event.preventDefault(),$(this).prev("span.copied").fadeIn(100).delay(10).fadeOut(2e3)}),$("#set_backup_option").submit(function(){return!1}),$(document).on("click","#set_backup_option a",function(e){var a=$(this).attr("show_single_backups_list_dbform_token"),r=$(this).attr("db_id");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:$("#set_backup_option").serialize(),beforeSend:function(){$("body").prepend('<div class="loader"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$("#backup_list_container").load("dbackupexpro_ajax.php?show_single_backups_list_dbform_token="+a+"&db_id="+r)),$(".loader").fadeOut(500),setTimeout(function(){$(".loader").remove()},1e3)}}),e.preventDefault()}),$("#set_backup_option_ftp").submit(function(){return!1}),$(document).on("click","#set_backup_option_ftp a",function(e){$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:$("#set_backup_option_ftp").serialize(),beforeSend:function(){$("body").prepend('<div class="loader"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):t(e),$(".loader").fadeOut(500),setTimeout(function(){$(".loader").remove()},1e3)}}),e.preventDefault()}),$(document).on("click",".send-single-file-ftp",function(e){e.preventDefault();var a=$(this).attr("database-id"),r=$(this).attr("filename"),n=$(this).attr("enviar_single_file_ftp_token");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{enviar_single_file_ftp_token:n,filename:r,db_id:a},beforeSend:function(){$("#backup_list_container").prepend('<div class="loader_card" ></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):t(e),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},700)}})}),$(document).on("click","#create_new_backup",function(e){var a=$(this).attr("create_new_backup_dbform_token"),r=$(this).attr("show_single_backups_list_dbform_token"),n=$(this).attr("db_id");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{create_new_backup_dbform_token:a,db_id:n},beforeSend:function(){$("#backup_list_container").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$("#backup_list_container").load("dbackupexpro_ajax.php?show_single_backups_list_dbform_token="+r+"&db_id="+n)),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},700)}}),e.preventDefault()}),$(document).on("click",".del-db-backup",function(e){var a="row_"+$(this).attr("row"),r=$(this).attr("id"),n=$(this).attr("db_id"),o=$(this).attr("del_backup_dbform_token");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{del_backup_dbform_token:o,file:r,db_id:n},beforeSend:function(){$("#backup_list_container").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$("#"+a).fadeOut(800)),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},700)}}),e.preventDefault()}),$(".upload_new_backup").ajaxForm({beforeSend:function(){$("form.upload_new_backup").prepend('<div class="loader_card"></div>')},success:function(e){if(e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1)i(e);else{var a=$("#set_backup_option a").attr("show_single_backups_list_dbform_token"),r=$("#set_backup_option a").attr("db_id");t(e),$("#backup_list_container").load("dbackupexpro_ajax.php?show_single_backups_list_dbform_token="+a+"&db_id="+r)}$(".loader_card").fadeOut().remove()},complete:function(e){status.html(e.responseText)}}),$(".upload_new_backup input[type=file]").on("change",function(){$("form.upload_new_backup").submit()}),$(document).on("click",".restore-db",function(e){var a=$(this).attr("restore_backup_dbform_token"),r=$(this).attr("restorefile"),n=$(this).attr("db_id");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{restore_backup_dbform_token:a,file:r,db_id:n},beforeSend:function(){$("body").prepend('<div class="loader"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):t(e),$(".loader").fadeOut().remove()}}),e.preventDefault()}),$(document).on("submit",".restore-db-parcial",function(e){var a=$(this);$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:a.serialize(),beforeSend:function(){$(".modal-body:first").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):t(e),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$("#add_new_ftp").submit(function(e){var a=$("#add_new_ftp");$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),beforeSend:function(){$("#add_new_ftp").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):t(e),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(document).on("submit",".update_ftp_form",function(e){var a=$(this),r=(a.attr("id"),$("#procura_ftp_form_token").val());$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:a.serialize(),beforeSend:function(){},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$(".modal-backdrop").remove(),$("#list_result_box").prepend('<div class="loader_card"></div>'),$("#ftp_list_result").load("dbackupexpro_ajax.php?procura_ftp_form_token="+r)),$(".loader").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(document).on("click",".delete-ftp",function(e){var a=$(this).attr("id"),r="row_"+a,n=$(this).attr("delete_ftpform_token");$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:{delete_ftpform_token:n,ftp_id:a},beforeSend:function(){$("#list_result_box").prepend('<div class="loader_card"></div>')},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$("#"+r).fadeOut(800)),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},700)}}),e.preventDefault()}),$(document).on("submit","#ftp_select_form_list",function(e){$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:$(this).serialize(),beforeSend:function(){},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$(this).prepend('<div class="loader_card"></div>')),$(".loader").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(function(){$("#selected_ftp").change(function(){$("#ftp_select_form_list").submit()})}),$(document).on("submit","#activate_main_cron_job_for_db",function(e){$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:$(this).serialize(),beforeSend:function(){},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$(this).prepend('<div class="loader_card"></div>')),$(".loader").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(function(){$("#main_cronjob_active,#main_cronjob_interval").change(function(){$("#activate_main_cron_job_for_db").submit()})}),$(document).on("submit","#backup_partial_form",function(e){$.ajax({type:"POST",url:"dbackupexpro_ajax.php",data:$(this).serialize(),beforeSend:function(){},success:function(e){e.indexOf('<i class="fa fa-exclamation-triangle"></i>')>-1?i(e):(t(e),$(this).prepend('<div class="loader_card"></div>')),$(".loader").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}}),e.preventDefault()}),$(function(){$("#parcial_tables_activated").change(function(){$("#backup_partial_form").submit()})}),$(function(){$("#parcial_tables_activated").change(function(){$("#tables_checkbox_container").toggle(this.checked),$("partial-backup-options-container").prepend('<div class="loader_card"></div>'),$(".loader_card").fadeOut(500),setTimeout(function(){$(".loader_card").remove()},800)}),1!=$("#parcial_tables_activated").prop("checked")&&$("#tables_checkbox_container").hide()}),$("input, .balao").tooltip()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.Dropify=t(e.jQuery)}(this,function(e){function t(t,i){if(window.File&&window.FileReader&&window.FileList&&window.Blob){this.element=t,this.input=e(this.element),this.wrapper=null,this.preview=null,this.filenameWrapper=null,this.settings=e.extend(!0,{defaultFile:"",maxFileSize:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,showRemove:!0,showLoader:!0,showErrors:!0,errorTimeout:3e3,errorsPosition:"overlay",imgFileExtensions:["png","jpg","jpeg","gif","bmp"],maxFileSizePreview:"5M",allowedFormats:["portrait","square","landscape"],allowedFileExtensions:["*"],messages:{default:"Drag and drop a file here or click",replace:"Drag and drop or click to replace",remove:"Remove",error:"Ooops, something wrong appended."},error:{fileSize:"The file size is too big ({{ value }} max).",minWidth:"The image width is too small ({{ value }}}px min).",maxWidth:"The image width is too big ({{ value }}}px max).",minHeight:"The image height is too small ({{ value }}}px min).",maxHeight:"The image height is too big ({{ value }}px max).",imageFormat:"The image format is not allowed ({{ value }} only).",fileExtension:"The file is not allowed ({{ value }} only)."},tpl:{wrap:'<div class="dropify-wrapper"></div>',loader:'<div class="dropify-loader"></div>',message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}</p></div>',preview:'<div class="dropify-preview"><span class="dropify-render"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}</p></div></div></div>',filename:'<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner"></span></p>',clearButton:'<button type="button" class="dropify-clear">{{ remove }}</button>',errorLine:'<p class="dropify-error">{{ error }}</p>',errorsContainer:'<div class="dropify-errors-container"><ul></ul></div>'}},i,this.input.data()),this.errorsEvent=e.Event("dropify.errors"),this.isDisabled=!1,this.isInit=!1,this.file={object:null,name:null,size:null,width:null,height:null,type:null},Array.isArray(this.settings.allowedFormats)||(this.settings.allowedFormats=this.settings.allowedFormats.split(" ")),Array.isArray(this.settings.allowedFileExtensions)||(this.settings.allowedFileExtensions=this.settings.allowedFileExtensions.split(" ")),this.onChange=this.onChange.bind(this),this.clearElement=this.clearElement.bind(this),this.onFileReady=this.onFileReady.bind(this),this.translateMessages(),this.createElements(),this.setContainerSize(),this.errorsEvent.errors=[],this.input.on("change",this.onChange)}}var i="dropify";return t.prototype.onChange=function(){this.resetPreview(),this.readFile(this.element)},t.prototype.createElements=function(){this.isInit=!0,this.input.wrap(e(this.settings.tpl.wrap)),this.wrapper=this.input.parent();var t=e(this.settings.tpl.message).insertBefore(this.input);e(this.settings.tpl.errorLine).appendTo(t),!0===this.isTouchDevice()&&this.wrapper.addClass("touch-fallback"),this.input.attr("disabled")&&(this.isDisabled=!0,this.wrapper.addClass("disabled")),!0===this.settings.showLoader&&(this.loader=e(this.settings.tpl.loader),this.loader.insertBefore(this.input)),this.preview=e(this.settings.tpl.preview),this.preview.insertAfter(this.input),!1===this.isDisabled&&!0===this.settings.showRemove&&(this.clearButton=e(this.settings.tpl.clearButton),this.clearButton.insertAfter(this.input),this.clearButton.on("click",this.clearElement)),this.filenameWrapper=e(this.settings.tpl.filename),this.filenameWrapper.prependTo(this.preview.find(".dropify-infos-inner")),!0===this.settings.showErrors&&(this.errorsContainer=e(this.settings.tpl.errorsContainer),"outside"===this.settings.errorsPosition?this.errorsContainer.insertAfter(this.wrapper):this.errorsContainer.insertBefore(this.input));var i=this.settings.defaultFile||"";""!==i.trim()&&(this.file.name=this.cleanFilename(i),this.setPreview(this.isImage(),i))},t.prototype.readFile=function(t){if(t.files&&t.files[0]){var i=new FileReader,a=new Image,r=t.files[0],n=null,o=this,s=e.Event("dropify.fileReady");this.clearErrors(),this.showLoader(),this.setFileInformations(r),this.errorsEvent.errors=[],this.checkFileSize(),this.isFileExtensionAllowed(),this.isImage()&&this.file.size<this.sizeToByte(this.settings.maxFileSizePreview)?(this.input.on("dropify.fileReady",this.onFileReady),i.readAsDataURL(r),i.onload=function(e){n=e.target.result,a.src=e.target.result,a.onload=function(){o.setFileDimensions(this.width,this.height),o.validateImage(),o.input.trigger(s,[!0,n])}}.bind(this)):this.onFileReady(!1)}},t.prototype.onFileReady=function(e,t,i){if(this.input.off("dropify.fileReady",this.onFileReady),0===this.errorsEvent.errors.length)this.setPreview(t,i);else{this.input.trigger(this.errorsEvent,[this]);for(var a=this.errorsEvent.errors.length-1;a>=0;a--){var r=this.errorsEvent.errors[a].namespace.split(".").pop();this.showError(r)}if(void 0!==this.errorsContainer){this.errorsContainer.addClass("visible");var n=this.errorsContainer;setTimeout(function(){n.removeClass("visible")},this.settings.errorTimeout)}this.wrapper.addClass("has-error"),this.resetPreview(),this.clearElement()}},t.prototype.setFileInformations=function(e){this.file.object=e,this.file.name=e.name,this.file.size=e.size,this.file.type=e.type,this.file.width=null,this.file.height=null},t.prototype.setFileDimensions=function(e,t){this.file.width=e,this.file.height=t},t.prototype.setPreview=function(t,i){this.wrapper.removeClass("has-error").addClass("has-preview"),this.filenameWrapper.children(".dropify-filename-inner").html(this.file.name);var a=this.preview.children(".dropify-render");if(this.hideLoader(),!0===t){var r=e("<img />").attr("src",i);this.settings.height&&r.css("max-height",this.settings.height),r.appendTo(a)}else e("<i />").attr("class","dropify-font-file").appendTo(a),e('<span class="dropify-extension" />').html(this.getFileType()).appendTo(a);this.preview.fadeIn()},t.prototype.resetPreview=function(){this.wrapper.removeClass("has-preview");var e=this.preview.children(".dropify-render");e.find(".dropify-extension").remove(),e.find("i").remove(),e.find("img").remove(),this.preview.hide(),this.hideLoader()},t.prototype.cleanFilename=function(e){var t=e.split("\\").pop();return t==e&&(t=e.split("/").pop()),""!==e?t:""},t.prototype.clearElement=function(){if(0===this.errorsEvent.errors.length){var t=e.Event("dropify.beforeClear");this.input.trigger(t,[this]),!1!==t.result&&(this.resetFile(),this.input.val(""),this.resetPreview(),this.input.trigger(e.Event("dropify.afterClear"),[this]))}else this.resetFile(),this.input.val(""),this.resetPreview()},t.prototype.resetFile=function(){this.file.object=null,this.file.name=null,this.file.size=null,this.file.type=null,this.file.width=null,this.file.height=null},t.prototype.setContainerSize=function(){this.settings.height&&this.wrapper.height(this.settings.height)},t.prototype.isTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},t.prototype.getFileType=function(){return this.file.name.split(".").pop().toLowerCase()},t.prototype.isImage=function(){return"-1"!=this.settings.imgFileExtensions.indexOf(this.getFileType())},t.prototype.isFileExtensionAllowed=function(){return"-1"!=this.settings.allowedFileExtensions.indexOf("*")||"-1"!=this.settings.allowedFileExtensions.indexOf(this.getFileType())||(this.pushError("fileExtension"),!1)},t.prototype.translateMessages=function(){for(var e in this.settings.tpl)for(var t in this.settings.messages)this.settings.tpl[e]=this.settings.tpl[e].replace("{{ "+t+" }}",this.settings.messages[t])},t.prototype.checkFileSize=function(){0!==this.sizeToByte(this.settings.maxFileSize)&&this.file.size>this.sizeToByte(this.settings.maxFileSize)&&this.pushError("fileSize")},t.prototype.sizeToByte=function(e){var t=0;if(0!==e){var i=e.slice(-1).toUpperCase(),a=1048576;"K"===i?t=1024*parseFloat(e):"M"===i?t=parseFloat(e)*a:"G"===i&&(t=1073741824*parseFloat(e))}return t},t.prototype.validateImage=function(){0!==this.settings.minWidth&&this.settings.minWidth>=this.file.width&&this.pushError("minWidth"),0!==this.settings.maxWidth&&this.settings.maxWidth<=this.file.width&&this.pushError("maxWidth"),0!==this.settings.minHeight&&this.settings.minHeight>=this.file.height&&this.pushError("minHeight"),0!==this.settings.maxHeight&&this.settings.maxHeight<=this.file.height&&this.pushError("maxHeight"),"-1"==this.settings.allowedFormats.indexOf(this.getImageFormat())&&this.pushError("imageFormat")},t.prototype.getImageFormat=function(){return this.file.width==this.file.height?"square":this.file.width<this.file.height?"portrait":this.file.width>this.file.height?"landscape":void 0},t.prototype.pushError=function(t){var i=e.Event("dropify.error."+t);this.errorsEvent.errors.push(i),this.input.trigger(i,[this])},t.prototype.clearErrors=function(){void 0!==this.errorsContainer&&this.errorsContainer.children("ul").html("")},t.prototype.showError=function(e){void 0!==this.errorsContainer&&this.errorsContainer.children("ul").append("<li>"+this.getError(e)+"</li>")},t.prototype.getError=function(e){var t=this.settings.error[e],i="";return"fileSize"===e?i=this.settings.maxFileSize:"minWidth"===e?i=this.settings.minWidth:"maxWidth"===e?i=this.settings.maxWidth:"minHeight"===e?i=this.settings.minHeight:"maxHeight"===e?i=this.settings.maxHeight:"imageFormat"===e?i=this.settings.allowedFormats.join(", "):"fileExtension"===e&&(i=this.settings.allowedFileExtensions.join(", ")),""!==i?t.replace("{{ value }}",i):t},t.prototype.showLoader=function(){void 0!==this.loader&&this.loader.show()},t.prototype.hideLoader=function(){void 0!==this.loader&&this.loader.hide()},t.prototype.destroy=function(){this.input.siblings().remove(),this.input.unwrap(),this.isInit=!1},t.prototype.init=function(){this.createElements()},t.prototype.isDropified=function(){return this.isInit},e.fn[i]=function(a){return this.each(function(){e.data(this,i)||e.data(this,i,new t(this,a))}),this},t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(i))}function i(t){var i=t.target,a=e(i);if(!a.is("[type=submit],[type=image]")){var r=a.closest("[type=submit]");if(0===r.length)return;i=r[0]}var n=this;if(n.clk=i,"image"==i.type)if(void 0!==t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();n.clk_x=t.pageX-o.left,n.clk_y=t.pageY-o.top}else n.clk_x=t.pageX-i.offsetLeft,n.clk_y=t.pageY-i.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r={};r.fileapi=void 0!==e("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(i){function r(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){a("cannot get iframe.contentDocument: "+i),t=e.document}return t}function s(){var t=c.attr2("target"),i=c.attr2("action"),n=c.attr("enctype")||c.attr("encoding")||"multipart/form-data";k.setAttribute("target",m),(!o||/post/i.test(o))&&k.setAttribute("method","POST"),i!=p.url&&k.setAttribute("action",p.url),p.skipEncodingOverride||o&&!/post/i.test(o)||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),p.timeout&&($=setTimeout(function(){y=!0,l(T)},p.timeout));var s=[];try{if(p.extraData)for(var d in p.extraData)p.extraData.hasOwnProperty(d)&&s.push(e.isPlainObject(p.extraData[d])&&p.extraData[d].hasOwnProperty("name")&&p.extraData[d].hasOwnProperty("value")?e('<input type="hidden" name="'+p.extraData[d].name+'">').val(p.extraData[d].value).appendTo(k)[0]:e('<input type="hidden" name="'+d+'">').val(p.extraData[d]).appendTo(k)[0]);p.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",l):g.addEventListener("load",l,!1),setTimeout(function e(){try{var t=r(g).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),l(j),$&&clearTimeout($),$=void 0}},15);try{k.submit()}catch(e){document.createElement("form").submit.apply(k)}}finally{k.setAttribute("action",i),k.setAttribute("enctype",n),t?k.setAttribute("target",t):c.removeAttr("target"),e(s).remove()}}function l(t){if(!_.aborted&&!D){if((E=r(g))||(a("cannot access response document"),t=j),t===T&&_)return _.abort("timeout"),void w.reject(_,"timeout");if(t==j&&_)return _.abort("server abort"),void w.reject(_,"error","server abort");if(E&&E.location.href!=p.iframeSrc||y){g.detachEvent?g.detachEvent("onload",l):g.removeEventListener("load",l,!1);var i,n="success";try{if(y)throw"timeout";var o="xml"==p.dataType||E.XMLDocument||e.isXMLDoc(E);if(a("isXml="+o),!o&&window.opera&&(null===E.body||!E.body.innerHTML)&&--C)return a("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var s=E.body?E.body:E.documentElement;_.responseText=s?s.innerHTML:null,_.responseXML=E.XMLDocument?E.XMLDocument:E,o&&(p.dataType="xml"),_.getResponseHeader=function(e){return{"content-type":p.dataType}[e.toLowerCase()]},s&&(_.status=Number(s.getAttribute("status"))||_.status,_.statusText=s.getAttribute("statusText")||_.statusText);var c=(p.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||p.textarea){var u=E.getElementsByTagName("textarea")[0];if(u)_.responseText=u.value,_.status=Number(u.getAttribute("status"))||_.status,_.statusText=u.getAttribute("statusText")||_.statusText;else if(d){var f=E.getElementsByTagName("pre")[0],m=E.getElementsByTagName("body")[0];f?_.responseText=f.textContent?f.textContent:f.innerText:m&&(_.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==c&&!_.responseXML&&_.responseText&&(_.responseXML=z(_.responseText));try{F=A(_,c,p)}catch(e){n="parsererror",_.error=i=e||n}}catch(e){a("error caught: ",e),n="error",_.error=i=e||n}_.aborted&&(a("upload aborted"),n=null),_.status&&(n=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===n?(p.success&&p.success.call(p.context,F,"success",_),w.resolve(_.responseText,"success",_),h&&e.event.trigger("ajaxSuccess",[_,p])):n&&(void 0===i&&(i=_.statusText),p.error&&p.error.call(p.context,_,n,i),w.reject(_,"error",i),h&&e.event.trigger("ajaxError",[_,p,i])),h&&e.event.trigger("ajaxComplete",[_,p]),h&&!--e.active&&e.event.trigger("ajaxStop"),p.complete&&p.complete.call(p.context,_,n),D=!0,p.timeout&&clearTimeout($),setTimeout(function(){p.iframeTarget?v.attr("src",p.iframeSrc):v.remove(),_.responseXML=null},100)}}}var d,u,p,h,m,v,g,_,b,x,y,$,k=c[0],w=e.Deferred();if(w.abort=function(e){_.abort(e)},i)for(u=0;u<f.length;u++)d=e(f[u]),n?d.prop("disabled",!1):d.removeAttr("disabled");if((p=e.extend(!0,{},e.ajaxSettings,t)).context=p.context||p,m="jqFormIO"+(new Date).getTime(),p.iframeTarget?(x=(v=e(p.iframeTarget)).attr2("name"))?m=x:v.attr2("name",m):(v=e('<iframe name="'+m+'" src="'+p.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),g=v[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";a("aborting upload... "+i),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(e){}v.attr("src",p.iframeSrc),_.error=i,p.error&&p.error.call(p.context,_,i,t),h&&e.event.trigger("ajaxError",[_,p,i]),p.complete&&p.complete.call(p.context,_,i)}},(h=p.global)&&0==e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[_,p]),p.beforeSend&&!1===p.beforeSend.call(p.context,_,p))return p.global&&e.active--,w.reject(),w;if(_.aborted)return w.reject(),w;(b=k.clk)&&((x=b.name)&&!b.disabled&&(p.extraData=p.extraData||{},p.extraData[x]=b.value,"image"==b.type&&(p.extraData[x+".x"]=k.clk_x,p.extraData[x+".y"]=k.clk_y)));var T=1,j=2,S=e("meta[name=csrf-token]").attr("content"),O=e("meta[name=csrf-param]").attr("content");O&&S&&(p.extraData=p.extraData||{},p.extraData[O]=S),p.forceSync?s():setTimeout(s,10);var F,E,D,C=50,z=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},A=function(t,i,a){var r=t.getResponseHeader("content-type")||"",n="xml"===i||!i&&r.indexOf("xml")>=0,o=n?t.responseXML:t.responseText;return n&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&r.indexOf("json")>=0?o=P(o):("script"===i||!i&&r.indexOf("javascript")>=0)&&e.globalEval(o)),o};return w}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var o,s,l,c=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),o=t.type||this.attr2("method"),(l=(l="string"==typeof(s=t.url||this.attr2("action"))?e.trim(s):"")||window.location.href||"")&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:o||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var d={};if(this.trigger("form-pre-serialize",[this,t,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var u=t.traditional;void 0===u&&(u=e.ajaxSettings.traditional);var p,f=[],h=this.formToArray(t.semantic,f);if(t.data&&(t.extraData=t.data,p=e.param(t.data,u)),t.beforeSubmit&&!1===t.beforeSubmit(h,this,t))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,t,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=e.param(h,u);p&&(m=m?m+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+m,t.data=null):t.data=m;var v=[];if(t.resetForm&&v.push(function(){c.resetForm()}),t.clearForm&&v.push(function(){c.clearForm(t.includeHidden)}),!t.dataType&&t.target){var g=t.success||function(){};v.push(function(i){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](i).each(g,arguments)})}else t.success&&v.push(t.success);if(t.success=function(e,i,a){for(var r=t.context||this,n=0,o=v.length;o>n;n++)v[n].apply(r,[e,i,a||c,c])},t.error){var _=t.error;t.error=function(e,i,a){var r=t.context||this;_.apply(r,[e,i,a,c])}}if(t.complete){var b=t.complete;t.complete=function(e,i){var a=t.context||this;b.apply(a,[e,i,c])}}var x=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}).length>0,y="multipart/form-data",$=c.attr("enctype")==y||c.attr("encoding")==y,k=r.fileapi&&r.formdata;a("fileAPI :"+k);var w,T=(x||$)&&!k;!1!==t.iframe&&(t.iframe||T)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){w=i(h)}):w=i(h):w=(x||$)&&k?function(i){for(var a=new FormData,r=0;r<i.length;r++)a.append(i[r].name,i[r].value);if(t.extraData){var n=function(i){var a,r,n=e.param(i,t.traditional).split("&"),o=n.length,s=[];for(a=0;o>a;a++)n[a]=n[a].replace(/\+/g," "),r=n[a].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}(t.extraData);for(r=0;r<n.length;r++)n[r]&&a.append(n[r][0],n[r][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});t.uploadProgress&&(s.xhr=function(){var i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(e){var i=0,a=e.loaded||e.position,r=e.total;e.lengthComputable&&(i=Math.ceil(a/r*100)),t.uploadProgress(e,a,r,i)},!1),i}),s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,i){i.data=t.formData?t.formData:a,l&&l.call(this,e,i)},e.ajax(s)}(h):e.ajax(t),c.removeData("jqxhr").data("jqxhr",w);for(var j=0;j<f.length;j++)f[j]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r){if((r=r||{}).delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(r)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,t).bind("click.form-plugin",r,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var a=[];if(0===this.length)return a;var n,o,s,l,c,d,u,p,f=this[0],h=this.attr("id"),m=t?f.getElementsByTagName("*"):f.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=e(m).get()),h&&((n=e(':input[form="'+h+'"]').get()).length&&(m=(m||[]).concat(n))),!m||!m.length)return a;for(o=0,u=m.length;u>o;o++)if((l=(d=m[o]).name)&&!d.disabled)if(t&&f.clk&&"image"==d.type)f.clk==d&&(a.push({name:l,value:e(d).val(),type:d.type}),a.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if((c=e.fieldValue(d,!0))&&c.constructor==Array)for(i&&i.push(d),s=0,p=c.length;p>s;s++)a.push({name:l,value:c[s]});else if(r.fileapi&&"file"==d.type){i&&i.push(d);var v=d.files;if(v.length)for(s=0;s<v.length;s++)a.push({name:l,value:v[s],type:d.type});else a.push({name:l,value:"",type:d.type})}else null!=c&&(i&&i.push(d),a.push({name:l,value:c,type:d.type,required:d.required}));if(!t&&f.clk){var g=e(f.clk),_=g[0];(l=_.name)&&!_.disabled&&"image"==_.type&&(a.push({name:l,value:g.val()}),a.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var a=this.name;if(a){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var n=0,o=r.length;o>n;n++)i.push({name:a,value:r[n]});else null!=r&&i.push({name:this.name,value:r})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],a=0,r=this.length;r>a;a++){var n=this[a],o=e.fieldValue(n,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(i,o):i.push(o))}return i},e.fieldValue=function(t,i){var a=t.name,r=t.type,n=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!a||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==n&&-1==t.selectedIndex))return null;if("select"==n){var o=t.selectedIndex;if(0>o)return null;for(var s=[],l=t.options,c="select-one"==r,d=c?o+1:l.length,u=c?o:0;d>u;u++){var p=l[u];if(p.selected){var f=p.value;if(f||(f=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),c)return f;s.push(f)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,r=this.tagName.toLowerCase();i.test(a)||"textarea"==r?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});